# çŸ¥æ—…ï¼ˆTravelDNAï¼‰- æ™ºèƒ½æ—…æ¸¸æ¨èå¹³å°

## é¡¹ç›®æ¦‚è¿°
çŸ¥æ—…æ˜¯ä¸€æ¬¾èåˆå¤šæºæ•°æ®çš„åŠ¨æ€æ—…æ¸¸æ¨èå¹³å°ï¼Œè‡´åŠ›äºé€šè¿‡ä¸ªæ€§åŒ–æ¨èã€å®æ—¶æ•°æ®æ•´åˆå’Œæ™ºèƒ½é—®ç­”ï¼Œä¸ºç”¨æˆ·æä¾›æ›´è´´åˆéœ€æ±‚çš„æ—…æ¸¸æ–¹æ¡ˆã€‚

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¤– **æ™ºèƒ½AIåŠ©æ‰‹**ï¼šåŸºäºç”¨æˆ·éœ€æ±‚æä¾›ä¸ªæ€§åŒ–æ—…æ¸¸å»ºè®®
- ğŸ—ºï¸ **æ™ºèƒ½è·¯çº¿è§„åˆ’**ï¼šç»¼åˆè€ƒè™‘å¤©æ°”ã€äº¤é€šã€äººæµç­‰å› ç´ 
- ğŸ‘¥ **ç¤¾åŒºäº’åŠ¨**ï¼šç”¨æˆ·å¯ä»¥ç»„å»ºé˜Ÿä¼ï¼Œåˆ†äº«æ—…æ¸¸ç»éªŒ
- ğŸ“Š **å®æ—¶æ•°æ®åˆ†æ**ï¼šæ•´åˆå¤©æ°”ã€äº¤é€šã€äººæµé‡ç­‰å®æ—¶ä¿¡æ¯
- ğŸ¯ **ä¸ªæ€§åŒ–æ¨è**ï¼šåŸºäºç”¨æˆ·åå¥½å’Œå†å²è¡Œä¸ºçš„ç²¾å‡†æ¨è

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**ï¼šNext.js 15.2.4 + React 18
- **æ ·å¼**ï¼šTailwind CSS + shadcn/ui
- **çŠ¶æ€ç®¡ç†**ï¼šZustand
- **HTTPå®¢æˆ·ç«¯**ï¼šFetch API
- **å¼€å‘å·¥å…·**ï¼šTypeScript + ESLint

### åç«¯æŠ€æœ¯æ ˆ
- **Communityæ¨¡å—**ï¼šFlask + SQLAlchemy + SQLite
- **Agentæ¨¡å—**ï¼šFlask + å¢å¼ºç‰ˆæ™ºèƒ½æ¨èç®—æ³• + å®æ—¶æ•°æ®é›†æˆ
- **æ•°æ®åº“**ï¼šSQLiteï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- **APIè®¾è®¡**ï¼šRESTful API
- **å®æ—¶æ•°æ®**ï¼šé«˜å¾·åœ°å›¾APIã€å¤©æ°”APIã€äº¤é€šAPI

## é¡¹ç›®ç»“æ„
```
TravelDNA/
â”œâ”€â”€ frontend/                 # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ chat/           # AIèŠå¤©é¡µé¢
â”‚   â”‚   â”œâ”€â”€ community/      # ç¤¾åŒºåŠŸèƒ½é¡µé¢
â”‚   â”‚   â”œâ”€â”€ planning/       # æ—…æ¸¸è§„åˆ’é¡µé¢
â”‚   â”‚   â”œâ”€â”€ globals.css     # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ layout.tsx      # å…¨å±€å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx        # é¦–é¡µ
â”‚   â”œâ”€â”€ components/         # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/            # UIåŸºç¡€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...            # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“å’ŒAPIæœåŠ¡
â”‚   â”œâ”€â”€ public/            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components.json    # shadcn/uié…ç½®
â”‚   â”œâ”€â”€ next.config.mjs    # Next.jsé…ç½®
â”‚   â”œâ”€â”€ package.json       # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ tailwind.config.ts # Tailwindé…ç½®
â”‚   â””â”€â”€ tsconfig.json      # TypeScripté…ç½®
â”œâ”€â”€ backend/               # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ Community/         # ç¤¾åŒºåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ app/          # Flaskåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ models/       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ app.py        # å¯åŠ¨æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â””â”€â”€ Agent/            # AIæ™ºèƒ½åŠ©æ‰‹æ¨¡å—
â”‚       â”œâ”€â”€ data/         # æ•°æ®æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ attractions/ # æ™¯ç‚¹æ•°æ®
â”‚       â”‚   â”œâ”€â”€ rag_corpus/  # RAGè¯­æ–™åº“
â”‚       â”‚   â””â”€â”€ reviews/     # è¯„è®ºæ•°æ®
â”‚       â”œâ”€â”€ app.py        # å¯åŠ¨æ–‡ä»¶
â”‚       â”œâ”€â”€ config.py     # é…ç½®æ–‡ä»¶
â”‚       â”œâ”€â”€ requirements.txt
â”‚       â””â”€â”€ travel_agent.py # æ ¸å¿ƒæœåŠ¡é€»è¾‘
â”œâ”€â”€ supabase/             # Supabaseé…ç½®
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore           # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ PROJECT_STRUCTURE.md # é¡¹ç›®ç»“æ„è¯´æ˜
â”œâ”€â”€ README.md            # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ requirements.txt     # é¡¹ç›®ä¾èµ–
```


## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- Python >= 3.8
- npm æˆ– pnpm

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone [æœ¬ä»“åº“åœ°å€]
   cd TravelDNA
   ```

2. **å®‰è£…åç«¯ä¾èµ–**
   
   å®‰è£…Communityæ¨¡å—ä¾èµ–ï¼š
   ```bash
   cd backend/Community
   pip install -r requirements.txt
   ```
   
   å®‰è£…Agentæ¨¡å—ä¾èµ–ï¼š
   ```bash
   cd ../Agent
   pip install -r requirements.txt
   ```

3. **å®‰è£…å‰ç«¯ä¾èµ–**
   ```bash
   cd ../../frontend
   npm install
   # æˆ–ä½¿ç”¨ pnpm
   pnpm install
   ```

4. **ç¯å¢ƒé…ç½®**
   ```bash
   # å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
   cp .env.example .env
   # æ ¹æ®éœ€è¦ä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„é…ç½®
   ```

### è¿è¡Œé¡¹ç›®

#### å¯åŠ¨åç«¯æœåŠ¡

1. **å¯åŠ¨Communityæ¨¡å—**ï¼ˆç«¯å£ï¼š5000ï¼‰
   ```bash
   cd backend/Community
   python app.py
   ```

2. **å¯åŠ¨Agentæ¨¡å—**ï¼ˆç«¯å£ï¼š5001ï¼‰
   ```bash
   cd backend/Agent
   python app.py
   ```

#### å¯åŠ¨å‰ç«¯æœåŠ¡
```bash
cd frontend
npm run dev
# è®¿é—® http://localhost:3000
```

### å¼€å‘æ¨¡å¼

å®Œæ•´çš„å¼€å‘ç¯å¢ƒéœ€è¦åŒæ—¶è¿è¡Œï¼š
- å‰ç«¯æœåŠ¡ï¼šhttp://localhost:3000
- Communityåç«¯ï¼šhttp://localhost:5000
- Agentåç«¯ï¼šhttp://localhost:5001

## APIæ–‡æ¡£

### Communityæ¨¡å— API

**åŸºç¡€URL**: `http://localhost:5000/api/v1`

#### ç³»ç»Ÿç®¡ç†
- `GET /init-data` - åˆå§‹åŒ–é»˜è®¤æ•°æ®

#### ç”¨æˆ·ç®¡ç†
- `GET /users/{id}` - è·å–ç”¨æˆ·ä¿¡æ¯
- `POST /users` - åˆ›å»ºç”¨æˆ·
- `PUT /users/{id}` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

#### é˜Ÿä¼ç®¡ç†
- `GET /teams` - è·å–é˜Ÿä¼åˆ—è¡¨ï¼ˆéœ€è¦user_idå‚æ•°ï¼‰
- `POST /teams` - åˆ›å»ºé˜Ÿä¼
- `DELETE /teams/{id}` - åˆ é™¤é˜Ÿä¼
- `POST /teams/{id}/members` - æ·»åŠ é˜Ÿä¼æˆå‘˜
- `DELETE /teams/{id}/members/{user_id}` - ç§»é™¤é˜Ÿä¼æˆå‘˜

#### æ¶ˆæ¯ç³»ç»Ÿ
- `GET /teams/{id}/messages` - è·å–é˜Ÿä¼æ¶ˆæ¯ï¼ˆæ”¯æŒlastMsgIdå¢é‡è·å–ï¼‰
- `POST /teams/{id}/messages` - å‘é€æ¶ˆæ¯

#### åŒ¹é…ç³»ç»Ÿ
- `GET /users/{id}/matches` - è·å–ç”¨æˆ·åŒ¹é…è®°å½•
- `POST /users/{id}/find-matches` - æŸ¥æ‰¾åŒ¹é…ç”¨æˆ·

### Agentæ¨¡å— API

**åŸºç¡€URL**: `http://localhost:5001/api/v1`

#### ç³»ç»ŸçŠ¶æ€
- `GET /health` - å¥åº·æ£€æŸ¥

#### AIèŠå¤©
- `POST /chat` - AIæ™ºèƒ½é—®ç­”
  ```json
  {
    "message": "ç”¨æˆ·æ¶ˆæ¯",
    "context": {
      "user_id": "ç”¨æˆ·ID"
    }
  }
  ```

#### æ—…æ¸¸è§„åˆ’
- `POST /travel-plan` - åˆ›å»ºæ—…æ¸¸è®¡åˆ’
- `GET /travel/plan/{id}` - è·å–è®¡åˆ’è¯¦æƒ…
- `POST /travel/plan/{id}/adjust` - è°ƒæ•´è®¡åˆ’
- `POST /travel/plan/{id}/optimize` - ä¼˜åŒ–è·¯çº¿

#### ä¿¡æ¯æŸ¥è¯¢
- `GET /poi/search` - æœç´¢æ™¯ç‚¹
- `GET /travel/weather` - è·å–å¤©æ°”ä¿¡æ¯
- `GET /travel/traffic` - è·å–äº¤é€šä¿¡æ¯
- `GET /travel/crowd` - è·å–äººæµä¿¡æ¯

#### åå¥½è®¾ç½®
- `GET /travel/preferences/questions` - è·å–åå¥½é—®é¢˜åˆ—è¡¨

## å¼€å‘æŒ‡å—

### å‰ç«¯å¼€å‘

1. **ç»„ä»¶å¼€å‘**ï¼šä½¿ç”¨shadcn/uiç»„ä»¶åº“ï¼Œéµå¾ªç»„ä»¶åŒ–å¼€å‘åŸåˆ™
2. **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨Zustandè¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†
3. **APIè°ƒç”¨**ï¼šç»Ÿä¸€ä½¿ç”¨libç›®å½•ä¸‹çš„APIæœåŠ¡æ–‡ä»¶
4. **æ ·å¼è§„èŒƒ**ï¼šä½¿ç”¨Tailwind CSSï¼Œé¿å…å†…è”æ ·å¼

### åç«¯å¼€å‘

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šCommunityå’ŒAgentæ¨¡å—ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²
2. **APIè§„èŒƒ**ï¼šéµå¾ªRESTful APIè®¾è®¡åŸåˆ™
3. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼
4. **æ•°æ®éªŒè¯**ï¼šå¯¹æ‰€æœ‰è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯

### ä»£ç è§„èŒƒ

- **TypeScript**ï¼šå‰ç«¯ä»£ç å¿…é¡»ä½¿ç”¨TypeScript
- **ESLint**ï¼šéµå¾ªé¡¹ç›®ESLinté…ç½®
- **Gitæäº¤**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
- **æ–‡æ¡£**ï¼šé‡è¦åŠŸèƒ½éœ€è¦æ·»åŠ æ³¨é‡Šå’Œæ–‡æ¡£

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **å‰ç«¯éƒ¨ç½²**
   ```bash
   cd frontend
   npm run build
   npm start
   ```

2. **åç«¯éƒ¨ç½²**
   - ä½¿ç”¨WSGIæœåŠ¡å™¨ï¼ˆå¦‚Gunicornï¼‰éƒ¨ç½²Flaskåº”ç”¨
   - é…ç½®åå‘ä»£ç†ï¼ˆå¦‚Nginxï¼‰
   - è®¾ç½®ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º`.env`æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š
```env
# å‰ç«¯é…ç½®
NEXT_PUBLIC_API_URL=http://localhost:5000/api/v1
NEXT_PUBLIC_AGENT_API_URL=http://localhost:5001/api/v1

# Communityåç«¯é…ç½®
FLASK_ENV=development
DATABASE_URL=sqlite:///travel.db
SECRET_KEY=your-secret-key

# Agentåç«¯é…ç½®
FLASK_HOST=0.0.0.0
FLASK_PORT=5001
FLASK_DEBUG=False

# APIå¯†é’¥é…ç½®ï¼ˆAgentæ¨¡å—éœ€è¦ï¼‰
AMAP_API_KEY=your-amap-api-key
AMAP_NAVIGATION_KEY=your-navigation-key
AMAP_TRAFFIC_KEY=your-traffic-key
WEATHER_API_KEY=your-weather-api-key
```

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹[LICENSE](LICENSE)æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æˆ‘ä»¬

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é¡¹ç›®Issuesï¼š[GitHub Issues](https://github.com/your-repo/issues)
- é‚®ç®±ï¼šyour-email@example.com

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»åœ¨ç§¯æå¼€å‘ä¸­ï¼ŒåŠŸèƒ½å’ŒAPIå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¿›è¡Œå……åˆ†æµ‹è¯•ã€‚
