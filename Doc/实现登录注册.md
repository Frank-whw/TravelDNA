## 主要任务：制作用户注册登录功能
- 目前 user 表里没有账号字段。还需要存储 email/phone、password_hash、salt、status 等信息
- 表结构有些冗余（是根据舍友匹配的那个改的，我没有细看。觉得可以删改的就自行删改即可）。

## 数据库概览
- 实例：Supabase PostgreSQL（`db.itqildytorcyteeuejnr.supabase.co:5432`）
- 默认库名：`postgres`
- 在Community目录下新建.env文件，填充如下字段：

    DATABASE_URI=postgresql://postgres:23011279Ecust%23@db.itqildytorcyteeuejnr.supabase.co:5432/postgres
    SQLALCHEMY_TRACK_MODIFICATIONS=False

- 然后运行 `backend\Community\check_sql.py` 来检验是否正确连接上了。
- `backend\Community\random_user.py` 这个是用来生成测试数据的。

## 表结构

### `mbti_type`（16 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | MBTI 类型名称 |
| create_time | timestamp | 创建时间 |

### `hobby`（14 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | 爱好名称 |
| create_time | timestamp | 创建时间 |

### `destination`（18 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | 目的地名称 |
| create_time | timestamp | 创建时间 |

### `schedule`（4 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | 行程偏好（例如紧凑/休闲） |
| create_time | timestamp | 创建时间 |

### `budget`（4 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | 预算等级 |
| create_time | timestamp | 创建时间 |

### `user`（300 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | 用户昵称 |
| avatar | varchar | 头像 URL |
| bio | text | 个人简介 |
| gender | varchar | 性别（男/女/其他） |
| age | integer | 年龄 |
| mbti_id | integer | 外键，关联 `mbti_type.id` |
| travel_destination_id | integer | 外键，关联 `destination.id` |
| schedule_id | integer | 外键，关联 `schedule.id` |
| budget_id | integer | 外键，关联 `budget.id` |
| create_time | timestamp | 创建时间 |
| update_time | timestamp | 更新时间 |

### `team`（80 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| name | varchar | 小队名称 |
| captain_id | integer | 队长用户 ID，关联 `user.id` |
| create_time | timestamp | 创建时间 |
| update_time | timestamp | 更新时间 |

### `match_record`（0 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| user_id | integer | 用户 ID，被匹配方 |
| matched_user_id | integer | 匹配成功的用户 ID |
| matching_score | integer | 匹配得分 |
| match_time | timestamp | 匹配时间 |
| is_valid | boolean | 状态标记 |

### `message`（2279 条）
| 字段 | 类型 | 说明 |
| --- | --- | --- |
| id | integer | 主键，自增 |
| team_id | integer | 所属小队，关联 `team.id` |
| sender_id | integer | 发送者用户 ID |
| content | text | 消息内容 |
| send_time | timestamp | 发送时间 |

