"""
智能旅行攻略规划师配置文件（简化版）
"""

import os

class Config:
    """系统配置类"""
    
    # ==================== 高德地图API配置 ====================
    # 高德地图天气API配置
    AMAP_WEATHER_API_KEY = os.getenv("AMAP_WEATHER_API_KEY", "demo_weather_key")
    AMAP_WEATHER_URL = "https://restapi.amap.com/v3/weather/weatherInfo"
    
    # 高德地图交通态势API配置
    AMAP_TRAFFIC_API_KEY = os.getenv("AMAP_TRAFFIC_API_KEY", "demo_traffic_key")
    AMAP_TRAFFIC_URL = "https://restapi.amap.com/v3/traffic/status/road"
    
    # 高德地图导航API配置
    AMAP_NAVIGATION_API_KEY = os.getenv("AMAP_NAVIGATION_API_KEY", "demo_navigation_key")
    AMAP_NAVIGATION_URL = "https://restapi.amap.com/v5/direction/driving"
    AMAP_NAVIGATION_TIMEOUT = 10
    AMAP_NAVIGATION_RATE_LIMIT = 5
    
    # 高德地图POI搜索API配置
    AMAP_POI_API_KEY = os.getenv("AMAP_POI_API_KEY", "demo_poi_key")
    AMAP_POI_TEXT_SEARCH_URL = "https://restapi.amap.com/v5/place/text"
    AMAP_POI_AROUND_SEARCH_URL = "https://restapi.amap.com/v5/place/around"
    AMAP_POI_POLYGON_SEARCH_URL = "https://restapi.amap.com/v5/place/polygon"
    AMAP_POI_TIMEOUT = 10
    AMAP_POI_RATE_LIMIT = 10
    
    # 演示模式开关 - 当API密钥为demo时使用模拟数据
    USE_DEMO_MODE = True
    
    # ==================== 上海景点坐标配置 ====================
    SHANGHAI_ATTRACTION_COORDINATES = {
        "外滩": "121.4905,31.2404",
        "东方明珠": "121.5052,31.2397",
        "上海迪士尼乐园": "121.6707,31.1505",
        "人民广场": "121.4737,31.2316",
        "南京路步行街": "121.4792,31.2350",
        "豫园": "121.4925,31.2267",
        "陆家嘴": "121.5078,31.2397",
        "徐家汇": "121.4418,31.1989",
        "田子坊": "121.4695,31.2143",
        "新天地": "121.4759,31.2179",
        "上海博物馆": "121.4737,31.2283",
        "上海科技馆": "121.5337,31.2226",
        "城隍庙": "121.4925,31.2267",
        "静安寺": "121.4458,31.2221",
        "淮海路": "121.4695,31.2143",
        "七宝古镇": "121.3510,31.1424",
        "朱家角": "121.0506,31.1072",
        "佘山": "121.1813,31.0989"
    }
    
    # 上海景点对应的区级代码
    SHANGHAI_ATTRACTION_DISTRICTS = {
        "外滩": "310101",      # 黄浦区
        "东方明珠": "310115",  # 浦东新区
        "迪士尼": "310115",    # 浦东新区
        "人民广场": "310101",  # 黄浦区
        "南京路": "310101",    # 黄浦区
        "豫园": "310101",      # 黄浦区
        "陆家嘴": "310115",    # 浦东新区
        "徐家汇": "310104",    # 徐汇区
        "静安寺": "310106",    # 静安区
        "新天地": "310101",    # 黄浦区
        "田子坊": "310101",    # 黄浦区
    }
    
    # ==================== 导航策略配置 ====================
    NAVIGATION_STRATEGIES = {
        "default": "0",        # 速度优先（时间）
        "fastest": "0",        # 速度优先（时间）
        "shortest": "1",       # 费用优先（不走收费路段的最快道路）
        "avoid_traffic": "2",  # 距离优先
        "avoid_highway": "3",  # 速度优先（不走快速路）
        "avoid_congestion": "4", # 躲避拥堵（不走拥堵路线）
        "avoid_toll": "5",     # 不走高速
        "avoid_toll_highway": "6", # 不走高速且避免收费
        "shortest_time": "7",  # 躲避拥堵和收费
        "recommend": "8",      # 高德推荐
        "multi_strategy": "9"  # 多策略（同时使用速度优先、费用优先、距离优先三个策略）
    }
    
    # 导航配置
    class NavigationConfig:
        OUTPUT_FIELDS = [
            "cost", "duration", "restriction", "traffic_lights", 
            "tolls", "polyline", "steps"
        ]
        
        # 车辆类型
        CAR_TYPES = {
            "fuel": 0,      # 燃油车
            "electric": 1,  # 电动车
            "hybrid": 2     # 混合动力
        }
    
    # ==================== POI类型配置 ====================
    POI_TYPE_CODES = {
        # 餐饮服务
        "餐饮": "050000",
        "中餐厅": "050100",
        "外国餐厅": "050200",
        "快餐厅": "050300",
        "休闲餐饮": "050400",
        "咖啡厅": "050500",
        "茶艺馆": "050600",
        "冷饮店": "050700",
        
        # 购物服务
        "购物": "060000",
        "购物中心": "060100",
        "超市": "060200",
        "便民商店": "060300",
        "家居建材": "060400",
        "家电数码": "060500",
        "商铺": "060600",
        
        # 生活服务
        "生活服务": "070000",
        "旅行社": "070100",
        "银行": "070200",
        "ATM": "070300",
        "邮局": "070400",
        "快递": "070500",
        
        # 体育休闲
        "体育休闲": "080000",
        "运动场馆": "080100",
        "休闲娱乐": "080200",
        "洗浴推拿": "080300",
        "KTV": "080400",
        
        # 医疗保健
        "医疗保健": "090000",
        "综合医院": "090100",
        "专科医院": "090200",
        "诊所": "090300",
        "药店": "090400",
        
        # 住宿服务
        "住宿服务": "100000",
        "宾馆酒店": "100100",
        "招待所": "100200",
        "度假村": "100300",
        
        # 风景名胜
        "风景名胜": "110000",
        "公园广场": "110101",
        "风景名胜区": "110102",
        "动物园": "110200",
        "植物园": "110300",
        "游乐园": "110400",
        "博物馆": "110500",
        "展览馆": "110600",
        "会展中心": "110700",
        "图书馆": "110800",
        "美术馆": "110900",
        
        # 商务住宅
        "商务住宅": "120000",
        "商务大厦": "120100",
        "住宅区": "120200",
        "政府机构": "120300",
        
        # 交通设施
        "交通设施": "150000",
        "火车站": "150100",
        "长途汽车站": "150200",
        "地铁站": "150300",
        "公交车站": "150400",
        "港口": "150500",
        "机场": "150600",
        "停车场": "150700"
    }
    
    # 默认POI类型（用于周边搜索）
    DEFAULT_POI_TYPES = [
        "050000",  # 餐饮服务
        "060000",  # 购物服务
        "110000",  # 风景名胜
        "080000",  # 体育休闲
        "100000"   # 住宿服务
    ]

def get_city_code(city_name: str) -> str:
    """获取城市代码（简化版）"""
    city_codes = {
        "上海": "310000",
        "上海市": "310000",
        "北京": "110000",
        "北京市": "110000",
        "广州": "440100",
        "深圳": "440300",
        "杭州": "330100",
        "南京": "320100",
        "苏州": "320500"
    }
    return city_codes.get(city_name, "310000")  # 默认返回上海代码

def get_city_info(city_code: str) -> dict:
    """获取城市信息（简化版）"""
    return {
        "name": "上海市",
        "code": city_code,
        "province": "上海市"
    }
